/* MAIN LAYOUT UI/UX
================================================== */

body, html {
    background-color: $white;
    padding: 0;
    margin: 0;
    font-family: $font-family-base;
    font-size: $font-size-base;
    line-height: $line-height-base;
    font-weight: $font-weight-base;
    letter-spacing: $letter-spacing;
    -webkit-font-smoothing: antialiased;
    -moz-font-smoothing: antialiased;
    //overflow-x: hidden;
	color: $black;
	width: 100%;
	min-height: 100%;
	height: 100%;

    @include min-mq(1600) {
        font-size: 18px;
    }

    @include xl {
        font-size: 20px;
    }

    @include xxl {
        font-size: 22px;
    }
}

a {
	@include transition(color .5s ease);
    color: $black;
    -webkit-tap-highlight-color: transparent;
	cursor: pointer;
	text-decoration: none;
	outline: none;

	&:hover {
		color: $black;
		text-decoration: none;
		outline: none;
	}
}

img {
	width: 100%;
	height: auto;
}

p + .btn {
	margin-top: 40px;
}

p:last-child {
	margin-bottom: 0;
}

.oh {
	overflow: hidden;
}


// Clear float

%clear {
	&:after {
	    clear: both;
	    content: " ";
	    display: block;
	    height: 0;
	    line-height: 0;
	    visibility: hidden;
	}
}

.clr {
	@extend %clear;
}


// Table structure

.dt {
	display: table;
	width: 100%;

	&.fullheight {
		height: 100%;
	}
}

.dtc {
	display: table-cell;

	&.align-middle {
		vertical-align: middle;
	}
	&.align-top {
		vertical-align: top;
	}
	&.align-bottom {
		vertical-align: bottom;
	}
}


// TABLE LAYOUT

#tablesite-content {
	display: table;
	height: 100%;
	width: 100%;
	table-layout:fixed;
	position: relative;

	&.autoheight {
		height: auto;
	}

	#footer-wrap {
		display: table-row;
		height: 1px;
	}

	#main-content {
		display: table-row;
		overflow: hidden;
	}
}


// Container

%container_common {
	@include sideMargin;

    @include sm {
        padding-left: 40px;
        padding-right: 40px;
    }

    @include xs {
        padding-left: 30px;
        padding-right: 30px;
    }
}

%container_default {
	width: 50%;

	@include md2 {
        width: 65%;
    }

	@include md {
        width: 75%;
    }

    @include max-mq(850) {
        width: 82%;
    }

    @include sm {
        width: 100%;
    }
}
%container_small {
	width: 65%;

	@include md {
        width: 75%;
    }

    @include max-mq(850) {
        width: 82%;
    }

    @include sm {
        width: 100%;
    }
}
%container_medium {
	width: 75%;

    @include max-mq(850) {
        width: 82%;
    }

    @include sm {
        width: 100%;
    }
}

%container_large {
	width: 94.4%;

    @include sm {
        width: 100%;
    }
}

.container {
	@extend %container_common;

	&:not(.small):not(.medium):not(.large) {
		@extend %container_default;
	}

	&.small {
		@extend %container_small;
	}

	&.medium {
		@extend %container_medium;
	}

	&.large {
		@extend %container_large;
	}
}


//Text align

.text-left {
	text-align: left;
}

.text-center {
	text-align: center;
}

.text-right {
	text-align: right;
}


// Columns and Gutenberg blocks

.row {
	&:not(.align-middle) {
		@include flex();
	}

	&.align-middle {
		@include flex($align: center);
	}

	&.reverse {
		flex-direction: row-reverse;
	}
	
	.col50 {
		@include flexWidth( calc(50% - 40px) );
		margin-bottom: 0;
	
		&:nth-child(even) {
			margin-left: 80px;
		}
	
		@include sm {
			@include flexWidth( 100% );
			margin-bottom: 40px;
	
			&:nth-child(even) {
				margin-left: 0;
			}
	
			&:not(:first-child) {
				margin-left: 0;
				margin-top: 10px;
			}
		}
	}
}


.wp-block-columns {
	&.is-style-reverse-columns {
		flex-direction: row-reverse;
	}

	.wp-block-column {
		flex-basis: calc(50% - 40px);

		@include xs {
			flex-basis: 50%;
		}
	}
	
	.wp-block-column:not(:first-child) {
		margin-left: 80px;

		@include xs {
			margin-left: 0;
			margin-top: 40px;
		}
	}

	&.is-style-no-spacing {
		.wp-block-column {
			flex-basis: 50%;
		}

		.wp-block-column:not(:first-child) {
			margin-left: 0;
		}
		.wp-block-column:not(:first-child) {
			@include xs {
				margin-top: 0;
			}
		}
	}
}

.wp-block-media-text {
	.wp-block-media-text__content {
		padding-left: 50px;
		padding-right: 0;

		@include xs {
			padding-left: 0;
			padding-top: 80px;
		}
	}

	.wp-block-media-text__media {
		@include xs {
			grid-area: unset;

			img {
				display: block;
				margin-left: auto;
				margin-right: auto;
			}
		}
	}

	@include xs {
		display: block;
		grid-template-columns: unset !important;
	}
}


// Text formats

%italic_bold {
	font-weight: 700;
	font-style: italic;
}


// Recaptcha

.grecaptcha-badge {
	opacity: 0 !important;
	pointer-events: none !important;
}


/* Fullheight top 
================================================== */

.fullheight-top {
	height: 100vh;
	width: 100%;

	.js-loaded & {
		height: 100vh; /* Fallback for browsers that do not support Custom Properties */
		height: calc(var(--vh, 1vh) * 100);
	}
}

/* Cookies 
================================================== */

#cookies-notification {
	@include transition(opacity .5s ease-in-out, visibility .5s ease-in-out);
	position: fixed;
	z-index: 10000;
	width: 100%;
	bottom: 0;
	left: 0;
	background-color: $black;
	padding-top: 40px;
	padding-bottom: 40px;
	color: $white;
	opacity: 1;
	visibility: visible;

	&.hidden {
		opacity: 0;
		visibility: hidden;
	}

	@include md2 {
    	padding-top: 30px;
		padding-bottom: 30px;
    }

	@include md {
    	padding-top: 20px;
		padding-bottom: 20px;
    }

	.container {
		@include flex();
	}

	.message {
		float: left;
		width: calc(100% - 140px);
		margin-bottom: 0;

		@include sm {
	    	width: 100%;
	    }

	    p {
	    	max-width: 900px;
	    	padding-right: 15px;
	    }

	    a {
	    	color: $white;
	    	text-decoration: underline;
	    }
	}

	.buttons {
		width: 140px;
		float: left;
		text-align: right;

		@include sm {
	    	width: 100%;
	    	text-align: left;
	    	margin-top: 20px;
	    }
	}
}


/* HEADER
================================================== */

.header {
    .logo {
		float: left;
		position: relative;

		a {
			display: block;
			font-size: 48px;
			font-weight: 200;
			letter-spacing: 20px;
			color: $white;

			img {
				float: left;
			}
		}

    }

	.toggle-menu {
		display: none;
		float: right;
		width: 25px;
		height: 20px;
		margin-top: 10px;
		position: relative;
		z-index: 10000;
	}

}

.mobile-menu {
	display: none;
}

/* HOMEPAGE
================================================== */


/* VIDEOS
================================================== */

.embed-container,
.kb-video .video-wrapper {
	&:before {
		@include pseudo;
		@include transition(opacity 0.5s ease, visibility 0.5s ease);
		background-color: rgba($black, 0.5);
		left: 0;
		top: 0;
		width: 100%;
		height: 100%;
		z-index: 3;
		opacity: 0;
		pointer-events: none;
		visibility: hidden;
	}

	[poster] {
		-o-object-fit: cover;
		object-fit: cover;
	}

	.play-video-btn {
		@include transition(opacity 0.5s ease, visibility 0.5s ease);
		position: absolute;
		height: 100px;
		width: 100px;
		margin-left: -100px;
		margin-top: -100px;
		left: 0;
		top: 0;
		z-index: 5;
		opacity: 0;
		padding: 0;
		border: 0;
		background-color: transparent;
		cursor: pointer;

		svg {
			width: 100%;
			height: 100%;
		}
	}

	&.paused:not(.loading) {
		&:before {
		   opacity: 1;
		   visibility: visible;
		}

		.play-video-btn {
			opacity: 1;
			margin-left: -50px;
			margin-top: -50px;
			left: 50%;
			top: 50%;
		}
	}

	&.loading {
		&:before {
			background-image: url('../images/video_loader.gif');
			background-size: 90px;
			background-position: center;
			background-repeat: no-repeat;
			opacity: 1;
			pointer-events: auto;
			visibility: visible;
		}
	}
}

.embed-container {
	iframe {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: 1;
	}
}

.embed-container,
.kb-video {
	.video-placeholder {
		@include transition(opacity 0.5s ease, visibility 0.5s ease);
		background-size: cover;
		background-position: center;
		z-index: 2;

		img {
			@extend %sr-only;
		}
	}
}

.kb-video:not(.video-loaded) {
	.video-placeholder {
		position: relative;
	}
}

.embed-container,
.kb-video.video-loaded {
	.video-placeholder {
		opacity: 0;
		visibility: hidden;
		pointer-events: none;
		position: absolute;
		top: 0;
		padding-top: 0 !important;
		height: 100%;
		width: 100%;
	}
}

.embed-container.paused,
.kb-video.video-loaded.video-wrapper.paused {
	.video-placeholder {
		opacity: 1;
		visibility: visible;
		pointer-events: auto;
	}
}

.kb-video {
	position: relative;
	overflow: hidden;
	
	video {
		width: 100%;
		height: auto;
		float: left;
	}
}

.embed-container,
.kb-video .video-wrapper {
	height: 100%;
	position: relative;
	overflow: hidden;

	video {
		float: left;
	}

	.video-controls {
		position: absolute;
		bottom: 30px;
		opacity: 1;
		left: 50%;
		margin-left: -50px;
		z-index: 10;

		button {
			display: inline-block;
			width: 21px;
			height: 21px;
			padding: 0;
			border: 0;
			background-color: transparent;
			margin-right: 20px;
			color: transparent;
			overflow: hidden;
			font-size: 0;
			background-repeat: no-repeat;
			background-size: auto 100%;
			background-position: left center;
			cursor: pointer;

			&:last-childÂ {
				margin-right: 0;
			}

		   &.play-pause {
			   width: 18px;
			   height: 21px;

			   &.play {
				   background-image: url('../images/controls-play.svg');
			   }

			   &.pause {
				   background-image: url('../images/controls-pause.svg');
			   }
		   }

		   &.mute {
			   height: 21px;
			   width: 21px;
			   background-image: url('../images/controls-mute.svg');

			   &.muted {
				   background-image: url('../images/controls-unmute.svg');
			   }
		   }

		   &.fullscreen {
			   height: 21px;
			   width: 21px;
			   background-image: url('../images/controls-fullscreen.svg');
		   }
		}
	}

	&.paused {
		.video-controls {
			opacity: 0;
		}

		.subtitles {
			display: none;
		}
	}

	.subtitles {
		position: absolute;
		bottom: 120px;
		left: 0;
		width: 100%;
		padding-left: 60px;
		padding-right: 60px;
		text-align: center;
		display: none;

		@media only screen and (max-width: 700px) { 
			padding-left: 25px;
			padding-right: 25px;
		}

		&.visible {
			display: block;
		}

		span {
			background-color: rgba($black, 0.8);
			padding: 0.2em 0 0.2em 0;
			-webkit-box-decoration-break: clone;
			-ms-box-decoration-break: clone;
			-o-box-decoration-break: clone;
			box-decoration-break: clone;
			box-shadow: 0.3em 0 0 rgba($black, 0.8), -0.3em 0 0 rgba($black, 0.8);
			line-height: 1.8;
		}
	}
}


/* DEFAULT PAGE
================================================== */

/* highlight-text */

.highlight-text {
	background-color: #dcdeeb;
	padding: 0.3em;
}

.site-content {
	overflow: hidden;

	> *:not(.kobu-section),
	> .kobu-section > * {
		&:not(.alignfull) {
			@extend %container_common;
		}

		&:not(.alignwide):not(.alignfull) {
			@extend %container_default;
		}

		&.alignwide:not(.larger-section) {
		}

		&.alignwide.larger-section {
		}

		&.alignfull {
			width: 100%;
		}
	}

	.home & {
		
	}
}


/* Gutenberg blocks */

.wp-block-kobu-custom-blocks-margin-aligned-image.alignwide,
.media-content-group.alignwide,
.wp-block-kobu-custom-blocks-columns-group.alignwide {
	.content-col-wrapper {
		//max-width: 67.76%;

		@include xs { 
			max-width: 100%;
		}
	}
}

.wp-block-kobu-custom-blocks-margin-aligned-image.alignwide.larger-section,
.media-content-group.alignwide.larger-section,
.wp-block-kobu-custom-blocks-columns-group.alignwide.larger-section {
	.content-col-wrapper {
		//max-width: 55.05%;

		@include xs { 
			max-width: 100%;
		}
	}
}

.wp-block-kobu-custom-blocks-margin-aligned-image.alignfull,
.media-content-group.alignfull,
.wp-block-kobu-custom-blocks-columns-group.alignfull {
	.content-col-wrapper {
		//max-width: 47.79%;

		@include xs { 
			max-width: 100%;
			padding-left: 30px;
			padding-right: 30px;
		}
	}
}

.wp-block-kobu-custom-blocks-margin-aligned-image,
.wp-block-kobu-custom-blocks-columns-group-item,
.media-content-group,
.wp-block-kobu-custom-blocks-text-slider-img-text .slide-content {
	&.valign-start,
	&.valign-masonry {
		@include flex;
	}

	&.valign-center {
		@include flex($align: center);
	}

	&.valign-end {
		@include flex($align: flex-end);
	}

	&.valign-stretch {
		@include flex;

		.media-col {
			align-self: stretch;
			position: relative;

			> * {
				height: 100%;
			}

			.img-wrapper {
				background-position: center;
				background-size: cover;
				background-repeat: no-repeat;

				img {
					@extend %sr-only;
				}
			}

			.kb-video {
				position: relative;
			}

			.kb-video,
			.video-wrapper {
				width: 100%;
				height: 100%;
			}

			.video-wrapper {
				position: absolute !important;
				top: 0;
				left: 0;

				video {
					height: 100%;
					width: 100%;
					object-fit: cover;
					position: absolute;
					top: 0;
					left: 0;
				}
			}
		}
	}

	&.img-first.align-right,
	&.img-last.align-left {
		flex-direction: row-reverse;
	}
}

.wp-block-kobu-custom-blocks-columns-group .child-item {
	//margin-bottom: 120px;

	&:last-child {
		margin-bottom: 0;
	}
}

.wp-block-kobu-custom-blocks-margin-aligned-image,
.wp-block-kobu-custom-blocks-columns-group-item,
.media-content-group,
.wp-block-kobu-custom-blocks-text-slider-img-text .slide-content {
	&.align-left {
		.media-col {
			padding-right: 60px;

			@include xs { 
				padding-right: 0;
			}
		}

		.content-col {
			.content-col-wrapper {
				margin-right: auto;
			}
		}
	}
	&.align-right {
		.media-col {
			padding-left: 60px;

			@include xs { 
				padding-left: 0;
			}
		}

		.content-col {
			.content-col-wrapper {
				margin-left: auto;
			}
		}
	}

	> *:not(:last-child) {
		@include xs {
			margin-bottom: 50px;
		}
	}

	.content-col {
		@include flexWidth( 50% );

		@include xs {
			@include flexWidth( 100% );
		}
	}

	.media-col {
		@include flexWidth( 50% );
		overflow: hidden;

		@include xs {
			@include flexWidth( 100% );
		}

		img {
			float: left;
		}

		.slider-gallery {
			.current-slide { // pagination
			}
		}
	}
}

.wp-block-kobu-custom-blocks-responsive-spacer {
	&.size-large {
		height: 100px;  // medium screen

		@media screen and (min-width: 1900px) { // large screens
	       height: 120px;
		}
		@media screen and (max-width: 768px) { // small screens
	       height: 70px;
		}
	}
}


/* OTHER TEMPLATES
================================================== */


/* ERROR PAGE
================================================== */


/* FOOTER
================================================== */
footer {
    width: 100%;
	position: relative;

    .copyright {
		float: left;
		font-size: 11px;
		color: $gray;

		a {
			text-decoration: underline;
		}
    }
}
